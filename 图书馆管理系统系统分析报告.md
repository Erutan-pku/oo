# 图书馆业务系统系统分析模型文档

相关文档链接：
*  [甲方需求文档](https://github.com/zhongyehong/oo-homework/blob/740f55bb10169b0eb114bfaa3e26101026b2a190/library.md ) 

*  [业务目标与涉众分析报告](https://github.com/Erutan-pku/oo/blob/86b3b8f7a5e7ceb09f158632ea108a970c3e2ddc/图书馆管理系统业务目标与涉众分析.md)

*  [需求分析报告](https://github.com/Erutan-pku/oo/blob/0782a53d173974d878e14c2c777d8342a6eb784d/图书馆管理系统需求分析报告.md)
----

### 概述

本文档包含对象模型和若干辅助模型，以及一份甲方对这一的模型的评价报告。

### 业务目标
> 与工件《业务目标与涉众分析报告》中的一致 

* 为图书馆用户提供自助信息查询与在线预约、在线续借服务，提高办事效率，方便客户，为客户提供更好的服务。
* 规范图书馆书籍与借阅情况管理，提高工作效率和管理效能。
* 对图书馆座位进行统一管理，方便用户在高峰期预约等位。
* 为管理员和用户之间的信息交流提供一个便捷的平台。

### 之前了解到的甲方实际情况、需求与业务规则
> 与工件《需求分析报告》中的一致 

##### 甲方情况与需求：

* 甲方图书馆属体制内单位，虽然馆藏书量不大，图书馆占地面积很小，自习区座位数很少，但满编制岗位足有8731人，除去各级管理岗位后仍有基层图书馆管理员6243人，有充足的人手手动对一些图书馆座位使用与书籍借阅的违规情况进行人工检查和系统录入。
* 图书馆管理系统并不需要和图书馆在岗人员的管理以及绩效考核挂钩。
* 国家有专门对对图书馆管理员计算机使用水平的培训，所以图书馆管理员的计算机水平可以放心。
* 该需求分析报告中提到的业务规则与非功能性需求满足甲方的需求，甲方对该需求分析报告整体表示满意。

##### 甲方的业务规则：

* [内禀规则-1] 预约座位，最多只可提前24小时预约。每次预约时间为1小时的整倍数，最多一次预约8小时。
* [内禀规则-2] 借书时间默认为3个月，不可变更。
* [内禀规则-3] 累计3次座位使用违规者(包括违约与使用超时)，停止其使用座位权限3天。第3+n次违规后，停止其使用座位权限3+n天(n=1,2,...,7)。超过10次违规者永久停止座位使用权限。
* [内禀规则-4] 累计3次图书借阅违规者(包括逾期不还与借书不取)，停止其借阅图书权限30天。第3+n次违规后，停止其使用座位权限30+10n天(n=1,2,...,7)。超过10次违规者永久停止借阅图书权限。
* [交互规则-1] 只有有权限的用户可以申请使用图书馆座位。
* [交互规则-2] 只有有权限的用户可以申请图书馆书籍借阅。
* [交互规则-3] 图书馆图书续借只能发生在借阅未超期时。
* [交互规则-4] 图书馆图书续借最长不超过3个月。续借时间为月的整倍数。

### 对甲方实际情况和需求的进一步了解

* 因为图书馆管理人员充足，所以图书馆是24小时营业的。不过很多时候客户比较少，所以即使在更新一些东西时暂时停掉系统，对业务也没有很大影响。
* 甲方图书馆中，所有图书和所有座位均已有统一编号。完全相同的书馆藏中只有一本，并且这条规则不会改变。
* 由于20年内无馆建计划，不打算对座位格局进行变更，所以不需要提供座位信息删改调整的接口，只需要在系统初始化时将座位信息表格导入到系统中即可。
* 图书检索方面只需要实现针对编号进行精确查找或者针对书名进行模糊查找即可。因为对图书馆管理员而言，编号是最方便的书籍代号；而对普通用户而言，他们也没有提出对书名之外的字段进行检索的需求，毕竟馆藏量不大，名称相似的书籍很少，一般也不会特意去记作者、出版社等字段。(其实这个问题更适合在需求分析过程中使用领域模型处理)
* 座位检索方面，图书馆的1~4层每层只有一个自习区，图书馆座位使用者表示只需要能够检索特定层的空座位就好了。因为图书馆自习区座位设计比较合理，并且每个自习区座位数不多，所以每个座位环境什么的差别不大。只是有些腿脚不太方便的用户在调查时表示，他们一般会更倾向于使用较低楼层的座位。还有些喜欢清静的用户在调查时表示，因为较高楼层很少有人路过，所以更倾向于使用较高楼层的座位。(其实这个问题更适合在需求分析过程中使用领域模型处理)
* ​





















### 业务用况规约

* 用户账户注册与管理：非本系统典型用况，本系统对此业务无特殊要求，考虑复用经典用户管理模块。
* 图书馆座位的使用与管理

| 用况名称   | 预约图书馆座位资源                                |
| ------ | ---------------------------------------- |
| 用况描述   | 图书馆座位使用者查询图书馆座位资源的当前使用信息与预约情况，预约图书馆座位资源。 |
| 执行者    | 图书馆座位使用者                                 |
| 前置条件   | 申请用户权限正常                                 |
| 后置条件   | 成功完成用户预约座位记录                             |
| 主过程描述  | 1. 图书馆座位使用者在网上或图书馆现场使用系统终端查看图书馆座位资源的当前使用信息与预约情况。 <br> 2. 图书馆座位使用者在网上或图书馆现场使用系统终端提交图书馆座位预约申请，系统审核申请的合法性并登记在案，如果申请不合法则跳转到异常过程2.1.1。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | 2.1.1 该图书馆座位预约申请单不符合业务规则，拒绝该申请。用例结束。     |
| 业务规则   | [交互规则-1] 只有有权限的用户可以申请使用图书馆座位。            |

| 用况名称   | 图书馆座位资源管理                                |
| ------ | ---------------------------------------- |
| 用况描述   | 图书馆管理员不定期进行的图书馆座位资源检查，对预约违约情况、超时使用情况进行管理和记录。 |
| 执行者    | 图书馆管理员                                   |
| 前置条件   | (无)                                      |
| 后置条件   | 成功完成用户座位使用违约记录                           |
| 主过程描述  | 1.图书馆管理员不定期巡视座位使用情况。 <br> 2. 发现预约未使用座位者与超时使用者，记录在案并录入系统。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | (无)                                      |
| 业务规则   | (无)                                      |

* 图书馆书籍使用与管理

| 用况名称   | 图书馆书籍信息更新             |
| ------ | --------------------- |
| 用况描述   | 当图书馆有新书入库时，更新图书馆书籍信息。 |
| 执行者    | 图书馆管理员                |
| 前置条件   | 图书馆新书入库               |
| 后置条件   | 成功为新增书籍在系统中建立档案       |
| 主过程描述  | 1. 图书馆管理员登记入库新书       |
| 分支过程描述 | (无)                   |
| 异常过程描述 | (无)                   |
| 业务规则   | (无)                   |

| 用况名称   | 图书馆书籍报损              |
| ------ | -------------------- |
| 用况描述   | 当图书馆有书籍损毁时，更新图书馆书籍信息 |
| 执行者    | 图书馆管理员               |
| 前置条件   | 图书馆有书籍损毁             |
| 后置条件   | 成功为删除系统中的损毁书籍档案      |
| 主过程描述  | 1. 图书馆管理员删除损毁书籍档案    |
| 分支过程描述 | (无)                  |
| 异常过程描述 | (无)                  |
| 业务规则   | (无)                  |

| 用况名称   | 图书馆书籍外借                                  |
| ------ | ---------------------------------------- |
| 用况描述   | 图书馆书籍借阅者查询图书馆书籍信息及当前使用情况，预约并借阅图书。        |
| 执行者    | 书籍借阅者                                    |
| 前置条件   | 申请用户权限正常                                 |
| 后置条件   | 成功完成图书外借记录                               |
| 主过程描述  | 1. 图书馆书籍借阅者在网上或图书馆现场使用系统终端查看图书馆书籍信息及当前使用情况。 <br> 2. 图书馆书籍借阅者在网上或图书馆现场使用系统终端提交书籍借阅申请，系统审核申请的合法性并登记在案，如果申请不合法则跳转到异常过程2.1.1。 <br> 3. 书籍借阅者在预约时间到图书馆取书，图书馆管理员登记完成借阅过程。如果书籍借阅这没有按时取书，则跳转到异常过程3.1.1。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | 2.1.1 该图书馆书籍借阅申请单不符合业务规则，拒绝该申请。用例结束。 <br> 3.1.1 书籍借阅这没有按时取书，图书馆管理员取消该借阅申请并登入违规记录。用例结束。 |
| 业务规则   | [交互规则-2] 只有有权限的用户可以申请图书馆书籍借阅。            |

| 用况名称   | 图书馆书籍归还                                  |
| ------ | ---------------------------------------- |
| 用况描述   | 图书馆书籍借阅者在阅读完毕之后归还图书。                     |
| 执行者    | 书籍借阅者                                    |
| 前置条件   | 书籍借阅者手中图书已经阅读完毕。                         |
| 后置条件   | 成功完成图书归还记录                               |
| 主过程描述  | 1. 图书馆书籍借阅者携带图书到图书归还处。<br> 2. 图书馆管理员检查书籍情况，如果有问题则跳转到异常过程2.1.1，否则登记图书归还。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | 2.1.1 如果图书丢失或损坏或超期，图书馆管理员收取赔偿款并进行图书馆书籍报损，并登记用户违规记录与图书归还记录。用例结束。 |
| 业务规则   | (无)                                      |

| 用况名称   | 图书馆书籍续借                                  |
| ------ | ---------------------------------------- |
| 用况描述   | 图书馆书籍借阅者在借阅期内申请图书续借。                     |
| 执行者    | 书籍借阅者                                    |
| 前置条件   | 图书馆书籍借阅者手中有在借图书且满足续借规则。                  |
| 后置条件   | 成功完成图书续借记录                               |
| 主过程描述  | 1. 图书馆书籍借阅者在网上或图书馆现场使用系统终端填写并提交书籍续借申请表，系统审核申请的合法性并登记在案，如果申请不合法则跳转到异常过程1.1.1。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | 1.1.1 该图书馆书籍续借申请单不符合业务规则，拒绝该申请。用例结束。     |
| 业务规则   | [交互规则-3] 图书馆图书续借只能发生在借阅未超期时。<br> [交互规则-4] 图书馆图书续借最长不超过3个月。 |

* 图书馆用户与管理员信息交互

| 用况名称   | 图书馆管理员发布通知                          |
| ------ | ----------------------------------- |
| 用况描述   | 图书馆管理员可以向全部或部分用户发布诸如闭关、催还书等通知。      |
| 执行者    | 图书馆管理员                              |
| 前置条件   | (无)                                 |
| 后置条件   | (无)                                 |
| 主过程描述  | 1. 图书馆管理员在系统中选择用户群、信息内容和类型并发送。用例结束。 |
| 分支过程描述 | (无)                                 |
| 异常过程描述 | (无)                                 |
| 业务规则   | (无)                                 |

| 用况名称   | 用户向图书馆管理员提问                              |
| ------ | ---------------------------------------- |
| 用况描述   | 用户可以向图书馆管理员提出一些问题。                       |
| 执行者    | 用户(书籍借阅者、座位使用者)                          |
| 前置条件   | (无)                                      |
| 后置条件   | (无)                                      |
| 主过程描述  | 1. 用户向图书馆管理员提问。 <br> 2.图书馆管理员对问题进行回答。用例结束。 |
| 分支过程描述 | (无)                                      |
| 异常过程描述 | (无)                                      |
| 业务规则   | (无)                                      |

### 系统用况图

![image](https://github.com/Erutan-pku/oo/blob/master/pic/用况图_nn.png?raw=true)

##### 系统用况图说明：

* 系统的外部角色有：图书馆用户（包括图书借阅者与座位使用者）和图书馆管理员
* 系统主要用例的文档描述：
  * 所有用户均有用户账户使用上的需求。(非本系统典型用况，故不展开细节)
  * 用户账户管理用例：由图书馆管理员管理。(非本系统典型用况，故不展开细节)
  * 沟通用例：主要包括图书馆管理员发布通知、图书馆用户提问、图书馆管理员回答三个用例功能。
  * 图书管理用例，包含图书借阅用例与书籍管理用例。
  * 图书借阅用例：主要包括借出、归还、续借三个用例功能。
  * 书籍管理用例：主要包括增加书籍信息、删改书籍信息两个用例功能。
  * 图书馆座位管理用例：主要包括图书馆座位预约与处理座位违约情况两个用例功能。


### 业务规则

* [内禀规则-1] 预约座位，最多只可提前72小时预约。
* [内禀规则-2] 累计3次座位使用违规者(包括违约与使用超时)，停止其使用座位权限3天。第3+n次违规后，停止其使用座位权限3+n天(n=1,2,...,7)。超过10次违规者永久停止座位使用权限。
* [内禀规则-3] 累计3次图书借阅违规者(包括逾期不还与借书不取)，停止其借阅图书权限30天。第3+n次违规后，停止其使用座位权限30+10n天(n=1,2,...,7)。超过10次违规者永久停止借阅图书权限。
* [交互规则-1] 只有有权限的用户可以申请使用图书馆座位。
* [交互规则-2] 只有有权限的用户可以申请图书馆书籍借阅。
* [交互规则-3] 图书馆图书续借只能发生在借阅未超期时。
* [交互规则-4] 图书馆图书续借最长不超过3个月。

### 非功能性需求

* 可靠性
  * 安全性：保证用户注册信息安全，在实现时应当采用可靠的安全处理机制，保证用户信息不被不法分子盗取利用。
  * 事务性
  * 稳定性：可以较长时间无故障地运行。定时进行数据备份，并高频备份重点信息（如书籍借阅信息），以便出现事故时进行恢复。
* 可用性：系统应当简单易用，界面简洁美观。通过界面上的简单提示用户即可快速掌握所需功能的操作方法。
* 有效性：系统应当具备一定的可伸缩性与可扩展性，在使用高峰时期应当具有一定的数据高速吞吐能力。
* 可移植性



